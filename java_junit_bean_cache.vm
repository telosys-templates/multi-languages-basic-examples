/*
 * JUnit test case
 * Created on $now.date ( $now.time )
 * Generated by Telosys ( https://www.telosys.org/ ) version $generator.version
 */
## fake package (only for example)
package org.examples;
## in real project use the following syntax 
## package ${target.javaPackageFromFolder(${TEST_SRC})};

import static org.junit.Assert.assertNull;
import static org.junit.Assert.assertTrue;

import org.junit.Test;

/**
 * JUnit test case for $entity.name caching service
 * 
 * @author Telosys
 *
 */
#set ( $beanVar    = ${fn.uncapitalize($entity.name)} )
#set ( $cacheClass = "${entity.name}Cache" )
#set ( $values = $fn.buildValues($entity.attributes, 1) )
public class ${cacheClass}Test 
{
	private static final void populate(${entity.name} ${beanVar}) {
#foreach( $attribute in $entity.attributes )
		${beanVar}.${attribute.setter}( $values.getValue($attribute.name) ) ;
#end
	}

	@Test
	public void testPutGetRemove() {
		
		System.out.println("Testing class ${cacheClass} ..." );
		
		${entity.name} ${beanVar} = new ${entity.name}();
		populate(${beanVar});
		System.out.println("Entity populated : " + ${beanVar} );
		
		${cacheClass}.put${entity.name}(${beanVar}) ;	// Store in cache	
		
		${entity.name} ${beanVar}2 = ${cacheClass}.get${entity.name}( $fn.argumentsListWithGetter( ${beanVar}, $entity.keyAttributes ) );
		assertTrue( ${beanVar} == ${beanVar}2 ) ; // Same instance
		
		${cacheClass}.remove${entity.name}(  $fn.argumentsListWithGetter( ${beanVar}, $entity.keyAttributes ) ) ; // Remove from cache	
		
		${entity.name} ${beanVar}3 = ${cacheClass}.get${entity.name}( $fn.argumentsListWithGetter( ${beanVar}, $entity.keyAttributes ) );
		assertTrue( null == ${beanVar}3 ) ; // Not in cache
		assertNull(${beanVar}3); // Not in cache

	}
}
